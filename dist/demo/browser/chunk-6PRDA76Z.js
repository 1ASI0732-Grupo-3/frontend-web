import{e as i,m as u,p as s,s as a}from"./chunk-SK7NGN37.js";var n=class{};var b=(()=>{let r=class r{constructor(t){this.authRepository=t,this.currentUserSubject=new i(null),this.currentUser$=this.currentUserSubject.asObservable(),this.loadCurrentUser()}loadCurrentUser(){this.authRepository.getCurrentUser().subscribe(t=>{this.currentUserSubject.next(t)})}login(t){return this.authRepository.login(t).pipe(u(e=>{this.currentUserSubject.next(e.user||null),e.token&&localStorage.setItem("auth_token",e.token)}))}register(t){return this.authRepository.register(t).pipe(u(e=>{this.currentUserSubject.next(e.user||null),e.token&&localStorage.setItem("auth_token",e.token)}))}logout(){return this.authRepository.logout().pipe(u(()=>{this.currentUserSubject.next(null),localStorage.removeItem("auth_token")}))}isAuthenticated(){return localStorage.getItem("auth_token")!==null&&this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}};r.\u0275fac=function(e){return new(e||r)(a(n))},r.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{n as a,b};
