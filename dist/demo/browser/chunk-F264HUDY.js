import{a as Z}from"./chunk-S5AWGB4U.js";import{a as h}from"./chunk-UX2XIPUK.js";import"./chunk-HGCZPB4I.js";import{a as W}from"./chunk-S5IXTXH2.js";import"./chunk-6PRDA76Z.js";import{b as A,e as z,h as $,i as j,j as G,m as U}from"./chunk-URCBRLE2.js";import{$ as P,D as c,F as S,G as I,K as f,N as O,O as g,P as o,Q as i,R as _,S as C,T as p,U as l,W as k,X as M,Z as s,_ as E,aa as V,ba as T,ca as F,da as D,ka as H,la as N,ma as L,sa as B,u as m,v as u,w as v,x as y}from"./chunk-SK7NGN37.js";function Y(r,d){r&1&&(o(0,"div",16),_(1,"div",17),o(2,"p"),s(3,"Loading products..."),i()())}function tt(r,d){if(r&1){let t=C();o(0,"div",18)(1,"p"),s(2),i(),o(3,"button",19),p("click",function(){m(t);let n=l();return u(n.loadProducts())}),s(4,"Try Again"),i()()}if(r&2){let t=l();c(2),E(t.error)}}function et(r,d){if(r&1){let t=C();v(),o(0,"g",43)(1,"path",44),p("mouseenter",function(){let n=m(t).index,a=l(2);return u(a.hoveredSegment=n)})("mouseleave",function(){m(t);let n=l(2);return u(n.hoveredSegment=-1)}),i()()}if(r&2){let t=d.$implicit,e=d.index,n=l(2);k("stroke",t.color)("fill",t.color),c(),k("opacity",n.hoveredSegment===e?"0.8":"1"),O("d",t.path)}}function nt(r,d){if(r&1&&(o(0,"div",45),_(1,"div",46),o(2,"span",47),s(3),i()()),r&2){let t=d.$implicit,e=d.index,n=l(2);M("hovered",n.hoveredSegment===e),c(),k("background-color",t.color),c(2),V("",n.getCategoryDisplayName(t.category)," (",t.count,")")}}function ot(r,d){if(r&1&&(o(0,"option",48),s(1),i()),r&2){let t=d.$implicit,e=l(2);g("value",t),c(),P(" ",e.getCategoryDisplayName(t)," ")}}function it(r,d){if(r&1){let t=C();o(0,"tr",49),p("click",function(){let n=m(t).$implicit,a=l(2);return u(a.viewProductDetail(n))}),o(1,"td")(2,"div",50),s(3),i()(),o(4,"td")(5,"span",51),s(6),i()(),o(7,"td",40)(8,"span",52),s(9),i()(),o(10,"td",40)(11,"span",53),s(12),i()()()}if(r&2){let t=d.$implicit,e=l(2);c(3),P(" ",t.name," "),c(2),O("data-category",t.category),c(),P(" ",e.getCategoryDisplayName(t.category)," "),c(2),M("low-stock",t.stock<=10),c(),P(" ",t.stock," "),c(2),M("low-stock-badge",t.stock<=10)("normal-stock-badge",t.stock>10),c(),P(" ",e.getStockStatus(t.stock)," ")}}function rt(r,d){if(r&1){let t=C();o(0,"div",54),v(),o(1,"svg",55),_(2,"path",56),i(),y(),o(3,"p"),s(4,"No products found"),i(),o(5,"button",19),p("click",function(){m(t);let n=l(2);return u(n.addProduct())}),s(6,"Add First Product"),i()()}}function at(r,d){if(r&1){let t=C();o(0,"div",20)(1,"div",21)(2,"div",22),v(),o(3,"svg",23)(4,"g",24),f(5,et,2,7,"g",25),_(6,"circle",26),i()(),y(),o(7,"div",27),f(8,nt,4,6,"div",28),i()()(),o(9,"div",29)(10,"div",30)(11,"h3"),s(12,"Product List"),i(),o(13,"div",31)(14,"select",32),D("ngModelChange",function(n){m(t);let a=l();return F(a.selectedCategory,n)||(a.selectedCategory=n),u(n)}),p("change",function(){m(t);let n=l();return u(n.filterByCategory())}),o(15,"option",33),s(16,"All Categories"),i(),f(17,ot,2,2,"option",34),i(),o(18,"button",35),p("click",function(){m(t);let n=l();return u(n.loadProducts())}),v(),o(19,"svg",36),_(20,"path",37),i()()()(),y(),o(21,"div",38)(22,"table",39)(23,"thead")(24,"tr")(25,"th"),s(26,"Name"),i(),o(27,"th"),s(28,"Category"),i(),o(29,"th",40),s(30,"Stock"),i(),o(31,"th",40),s(32,"Status"),i()()(),o(33,"tbody"),f(34,it,13,11,"tr",41),i()(),f(35,rt,7,0,"div",42),i()()()}if(r&2){let t=l();c(5),g("ngForOf",t.pieSegments),c(3),g("ngForOf",t.categoryData),c(6),T("ngModel",t.selectedCategory),c(3),g("ngForOf",t.availableCategories),c(17),g("ngForOf",t.filteredProducts)("ngForTrackBy",t.trackByProductId),c(),g("ngIf",t.filteredProducts.length===0&&!t.loading)}}function ct(r,d){if(r&1){let t=C();o(0,"button",57),p("click",function(){m(t);let n=l();return u(n.addProduct())}),v(),o(1,"svg",5),_(2,"path",58),i()()}}var xt=(()=>{let d=class d{constructor(e,n){this.inventoryService=e,this.router=n,this.products=[],this.filteredProducts=[],this.categoryData=[],this.pieSegments=[],this.availableCategories=[],this.selectedCategory="",this.loading=!1,this.error="",this.sidebarOpen=!1,this.hoveredSegment=-1,this.categoryColors={[h.MEDICINES]:"#FF6B6B",[h.FOOD]:"#4ECDC4",[h.VACCINES]:"#45B7D1",[h.SUPPLEMENTS]:"#96CEB4"}}ngOnInit(){this.loadProducts()}loadProducts(){this.loading=!0,this.error="",this.inventoryService.getProducts().subscribe({next:e=>{this.products=e,this.filteredProducts=e,this.processProductData(),this.loading=!1},error:e=>{this.error="Failed to load products. Please try again.",this.loading=!1,console.error("Error loading products:",e)}})}processProductData(){this.availableCategories=Array.from(new Set(this.products.map(a=>a.category)));let e=this.availableCategories.map(a=>{let x=this.products.filter(b=>b.category===a).length;return{category:a,count:x,color:this.categoryColors[a]||"#999",percentage:0}}),n=this.products.length;e.forEach(a=>{a.percentage=n>0?a.count/n*100:0}),this.categoryData=e,this.generatePieSegments()}generatePieSegments(){let e=-90;this.pieSegments=[],this.categoryData.forEach((n,a)=>{let x=n.percentage/100*360,b=e*Math.PI/180,w=(e+x)*Math.PI/180,R=80*Math.cos(b),q=80*Math.sin(b),J=80*Math.cos(w),K=80*Math.sin(w),Q=x>180?1:0,X=`M 0 0 L ${R} ${q} A 80 80 0 ${Q} 1 ${J} ${K} Z`;this.pieSegments.push({path:X,color:n.color,category:n.category,percentage:n.percentage}),e+=x})}filterByCategory(){this.selectedCategory?this.filteredProducts=this.products.filter(e=>e.category===this.selectedCategory):this.filteredProducts=this.products}getCategoryDisplayName(e){return{[h.MEDICINES]:"Medicines",[h.FOOD]:"Food",[h.VACCINES]:"Vaccines",[h.SUPPLEMENTS]:"Supplements"}[e]||e}getStockStatus(e){return e<=10?"Low Stock":"In Stock"}trackByProductId(e,n){return n.id}viewProductDetail(e){console.log("View product detail:",e)}addProduct(){this.router.navigate(["/inventory/add-product"])}goBack(){this.router.navigate(["/inventory"])}toggleSidebar(e){this.sidebarOpen=e}};d.\u0275fac=function(n){return new(n||d)(S(Z),S(B))},d.\u0275cmp=I({type:d,selectors:[["app-inventory-products"]],decls:17,vars:7,consts:[[1,"products-container"],[3,"sidebarToggle","isOpen"],[1,"main-content"],[1,"products-header"],[1,"menu-button",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"],[1,"back-button",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"],[1,"header-title"],[1,"products-content","fade-in"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","products-dashboard",4,"ngIf"],["class","fab",3,"click",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],[1,"btn","btn-primary",3,"click"],[1,"products-dashboard"],[1,"chart-card"],[1,"chart-container"],["viewBox","0 0 200 200",1,"pie-chart"],["transform","translate(100,100)"],["class","pie-segment",3,"stroke","fill",4,"ngFor","ngForOf"],["r","40","fill","var(--white)","stroke","none"],[1,"chart-legend"],["class","legend-item",3,"hovered",4,"ngFor","ngForOf"],[1,"table-card"],[1,"table-header"],[1,"table-controls"],[1,"category-filter",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"refresh-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"],[1,"table-container"],[1,"products-table"],[1,"text-center"],["class","product-row",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-state",4,"ngIf"],[1,"pie-segment"],[3,"mouseenter","mouseleave"],[1,"legend-item"],[1,"legend-color"],[1,"legend-text"],[3,"value"],[1,"product-row",3,"click"],[1,"product-name"],[1,"category-badge"],[1,"stock-amount"],[1,"status-badge"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","currentColor"],["d","M12,18H6V14H12M21,14V12L20,7H4L3,12V14H4V20H14V14H18V20H20V14M12,16H6V18H12V16Z"],[1,"fab",3,"click"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"app-sidebar",1),p("sidebarToggle",function(b){return a.toggleSidebar(b)}),i(),o(2,"div",2)(3,"header",3)(4,"button",4),p("click",function(){return a.toggleSidebar(!0)}),v(),o(5,"svg",5),_(6,"path",6),i()(),y(),o(7,"button",7),p("click",function(){return a.goBack()}),v(),o(8,"svg",8),_(9,"path",9),i()(),y(),o(10,"div",10),s(11,"Products"),i()(),o(12,"div",11),f(13,Y,4,0,"div",12)(14,tt,5,1,"div",13)(15,at,36,7,"div",14)(16,ct,3,0,"button",15),i()()()),n&2&&(c(),g("isOpen",a.sidebarOpen),c(3),M("hidden-desktop",!0),c(9),g("ngIf",a.loading),c(),g("ngIf",a.error),c(),g("ngIf",!a.loading&&!a.error),c(),g("ngIf",!a.loading))},dependencies:[L,H,N,U,j,G,$,A,z,W],styles:[".products-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;min-height:100dvh;background:var(--light-gray)}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:100vh;min-height:100dvh;width:0}.products-header[_ngcontent-%COMP%]{background:var(--dark-green);color:var(--white);padding:16px 20px;display:flex;align-items:center;gap:16px;position:sticky;top:0;z-index:100}.menu-button[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{background:none;border:none;color:var(--white);cursor:pointer;padding:8px;border-radius:8px;transition:var(--transition);display:flex;align-items:center;justify-content:center}.menu-button[_ngcontent-%COMP%]:hover, .back-button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.header-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.products-content[_ngcontent-%COMP%]{flex:1;padding:30px 20px;max-width:1200px;margin:0 auto;width:100%;position:relative}.products-dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:30px}.chart-card[_ngcontent-%COMP%], .table-card[_ngcontent-%COMP%]{background:var(--light-beige);border-radius:var(--border-radius);padding:24px}.chart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.pie-chart[_ngcontent-%COMP%]{width:200px;height:200px}.pie-segment[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:opacity .2s ease;cursor:pointer}.chart-legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;transition:var(--transition);cursor:pointer}.legend-item[_ngcontent-%COMP%]:hover, .legend-item.hovered[_ngcontent-%COMP%]{background:#ffffff80}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%}.legend-text[_ngcontent-%COMP%]{font-size:14px;color:var(--text-dark)}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-dark);font-size:18px}.table-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.category-filter[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:var(--white);font-size:14px;color:var(--text-dark)}.refresh-btn[_ngcontent-%COMP%]{background:var(--white);border:1px solid #ddd;border-radius:8px;padding:8px;cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center;color:var(--text-dark)}.refresh-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--white);padding:12px 16px;text-align:left;font-weight:600;color:var(--text-dark);border-bottom:2px solid #eee}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #eee}.product-row[_ngcontent-%COMP%]{cursor:pointer;transition:var(--transition)}.product-row[_ngcontent-%COMP%]:hover{background:#ffffffb3}.product-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark)}.product-subtitle[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:2px}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;background:#e3f2fd;color:#1976d2}.category-badge[data-category=MEDICINES][_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.category-badge[data-category=FOOD][_ngcontent-%COMP%]{background:#e8f5e8;color:#388e3c}.category-badge[data-category=VACCINES][_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.category-badge[data-category=SUPPLEMENTS][_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.stock-amount[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark)}.stock-amount.low-stock[_ngcontent-%COMP%]{color:#f44336}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.normal-stock-badge[_ngcontent-%COMP%]{background:#e8f5e8;color:#388e3c}.low-stock-badge[_ngcontent-%COMP%]{background:#ffebee;color:#f44336}.text-center[_ngcontent-%COMP%]{text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.fab[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:56px;height:56px;background:var(--dark-green);color:var(--white);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 20px #00000026;transition:var(--transition);z-index:50}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 24px #0003}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--dark-green);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1024px){.products-dashboard[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}@media (max-width: 768px){.products-content[_ngcontent-%COMP%]{padding:20px 15px}.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.table-controls[_ngcontent-%COMP%]{justify-content:space-between}}@media (min-width: 1024px){.hidden-desktop[_ngcontent-%COMP%]{display:none!important}.products-header[_ngcontent-%COMP%]{background:var(--light-gray);color:var(--dark-green);padding:20px}}"]});let r=d;return r})();export{xt as InventoryProductsComponent};
