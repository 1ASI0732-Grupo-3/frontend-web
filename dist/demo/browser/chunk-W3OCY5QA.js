import{a as T}from"./chunk-NXIFL3PH.js";import{$ as k,D as l,F as v,G as y,K as d,O as p,P as r,Q as a,R as h,S as P,T as f,U as g,X as b,Z as s,_ as m,ka as w,la as I,ma as S,p as C,s as M,sa as E,u as x,v as _,w as u,x as O}from"./chunk-SK7NGN37.js";var z=(()=>{let e=class e{constructor(n){this.plansRepository=n}getPlans(){return this.plansRepository.getPlans()}subscribeToPlan(n){return this.plansRepository.subscribeToPlan(n)}};e.\u0275fac=function(o){return new(o||e)(M(T))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function j(t,e){t&1&&(r(0,"span",23),s(1,"/ mes"),a())}function L(t,e){if(t&1&&(r(0,"li"),u(),r(1,"svg",24),h(2,"path",25),a(),s(3),a()),t&2){let i=e.$implicit;l(3),k(" ",i," ")}}function R(t,e){t&1&&(r(0,"span"),s(1,"Selecting..."),a())}function B(t,e){t&1&&(r(0,"span"),s(1,"Choose"),a())}function H(t,e){if(t&1){let i=P();r(0,"div",12)(1,"div",13)(2,"h2",14),s(3),a(),r(4,"div",15)(5,"span",16),s(6),a(),r(7,"span",17),s(8),a(),d(9,j,2,0,"span",18),a()(),r(10,"div",19)(11,"ul"),d(12,L,4,1,"li",20),a()(),r(13,"button",21),f("click",function(){let o=x(i).$implicit,c=g(2);return _(c.selectPlan(o))}),d(14,R,2,0,"span",22)(15,B,2,0,"span",22),a()()}if(t&2){let i=e.$implicit,n=g(2);b("popular",i.isPopular),l(3),m(i.name),l(3),m(i.currency),l(2),m(i.price),l(),p("ngIf",i.price>0),l(3),p("ngForOf",i.features),l(),b("btn-popular",i.isPopular),p("disabled",n.loading),l(),p("ngIf",n.loading&&n.selectedPlanId===i.id),l(),p("ngIf",!n.loading||n.selectedPlanId!==i.id)}}function Y(t,e){if(t&1&&(r(0,"div",10),d(1,H,16,12,"div",11),a()),t&2){let i=g();l(),p("ngForOf",i.plans)}}function $(t,e){t&1&&(r(0,"div",26),s(1," Loading plans... "),a())}function D(t,e){if(t&1){let i=P();r(0,"div",27)(1,"p"),s(2),a(),r(3,"button",28),f("click",function(){x(i);let o=g();return _(o.loadPlans())}),s(4,"Try Again"),a()()}if(t&2){let i=g();l(2),m(i.error)}}var K=(()=>{let e=class e{constructor(n,o){this.plansService=n,this.router=o,this.plans=[],this.loading=!1,this.error="",this.selectedPlanId=""}ngOnInit(){this.loadPlans()}loadPlans(){this.loading=!0,this.error="",this.plansService.getPlans().subscribe({next:n=>{this.plans=n,this.loading=!1},error:n=>{this.error="Failed to load plans. Please try again.",this.loading=!1}})}selectPlan(n){this.loading||(this.loading=!0,this.selectedPlanId=n.id,this.plansService.subscribeToPlan(n.id).subscribe({next:o=>{this.loading=!1,this.selectedPlanId="",o&&this.router.navigate(["/dashboard"])},error:o=>{this.loading=!1,this.selectedPlanId="",console.error("Failed to subscribe to plan:",o)}}))}goBack(){window.history.back()}};e.\u0275fac=function(o){return new(o||e)(v(z),v(E))},e.\u0275cmp=y({type:e,selectors:[["app-plans"]],decls:11,vars:3,consts:[[1,"plans-container"],[1,"plans-content","fade-in"],[1,"plans-header"],[1,"back-button",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"],[1,"plans-title"],["class","plans-grid",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"plans-grid"],["class","plan-card",3,"popular",4,"ngFor","ngForOf"],[1,"plan-card"],[1,"plan-header"],[1,"plan-name"],[1,"plan-price"],[1,"currency"],[1,"amount"],["class","period",4,"ngIf"],[1,"plan-features"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","plan-button",3,"click","disabled"],[4,"ngIf"],[1,"period"],["width","16","height","16","viewBox","0 0 24 24","fill","var(--dark-green)"],["d","M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"],[1,"loading-state"],[1,"error-state"],[1,"btn","btn-secondary",3,"click"]],template:function(o,c){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return c.goBack()}),u(),r(4,"svg",4),h(5,"path",5),a()(),O(),r(6,"h1",6),s(7,"Plans"),a()(),d(8,Y,2,1,"div",7)(9,$,2,0,"div",8)(10,D,5,1,"div",9),a()()),o&2&&(l(8),p("ngIf",c.plans.length>0),l(),p("ngIf",c.plans.length===0&&!c.error),l(),p("ngIf",c.error))},dependencies:[S,w,I],styles:['.plans-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--dark-green) 0%,#064a32 100%);padding:20px}.plans-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.plans-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:40px;padding-top:20px}.back-button[_ngcontent-%COMP%]{background:var(--white);border:none;border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:20px;transition:var(--transition);color:var(--dark-green)}.back-button[_ngcontent-%COMP%]:hover{transform:translate(-2px);box-shadow:0 4px 12px #00000026}.plans-title[_ngcontent-%COMP%]{color:var(--white);font-size:32px;font-weight:700;margin:0}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px}.plan-card[_ngcontent-%COMP%]{background:var(--white);border-radius:20px;padding:30px;box-shadow:0 10px 30px #0000001a;transition:var(--transition);position:relative}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 50px #00000026}.plan-card.popular[_ngcontent-%COMP%]{border:3px solid var(--primary-green);transform:scale(1.05)}.plan-card.popular[_ngcontent-%COMP%]:hover{transform:scale(1.05) translateY(-10px)}.plan-card.popular[_ngcontent-%COMP%]:before{content:"Most Popular";position:absolute;top:-12px;left:50%;transform:translate(-50%);background:var(--primary-green);color:var(--dark-green);padding:6px 20px;border-radius:20px;font-size:12px;font-weight:700}.plan-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.plan-name[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-dark);margin-bottom:10px}.plan-price[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;gap:4px}.currency[_ngcontent-%COMP%]{font-size:18px;color:var(--dark-green);font-weight:600}.amount[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:var(--dark-green)}.period[_ngcontent-%COMP%]{font-size:16px;color:#666}.plan-features[_ngcontent-%COMP%]{margin-bottom:30px}.plan-features[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.plan-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:12px;font-size:14px;line-height:1.5;color:var(--text-dark)}.plan-features[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.plan-button[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:18px;font-weight:700}.btn-popular[_ngcontent-%COMP%]{background:var(--primary-green);color:var(--dark-green)}.btn-popular[_ngcontent-%COMP%]:hover{background:#b8e639}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;color:var(--white);font-size:18px;padding:40px}@media (max-width: 768px){.plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.plan-card.popular[_ngcontent-%COMP%]{transform:scale(1)}.plan-card.popular[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}}']});let t=e;return t})();export{K as PlansComponent};
