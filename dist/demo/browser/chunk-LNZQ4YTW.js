import{a as j}from"./chunk-LZTNGLUZ.js";import"./chunk-JJHZGF76.js";import{a as R,b as W,c as F,d as B,e as z,f as I,l as N,m as L}from"./chunk-URCBRLE2.js";import{$ as A,D as r,F as M,G as k,K as x,O as m,P as t,Q as n,R as P,S as y,T as _,U as v,V as D,Z as d,_ as O,ba as f,ca as b,da as C,ka as V,la as E,ma as q,sa as T,u as p,v as c,w,x as S}from"./chunk-SK7NGN37.js";function H(s,g){if(s&1){let u=y();t(0,"label",31)(1,"input",32),_("change",function(a){p(u);let e=v();return c(e.onAnimalSelectionChange(a))}),n(),t(2,"span",33),d(3),n()()}if(s&2){let u=g.$implicit,o=v();r(),m("value",u)("checked",o.isAnimalSelected(u)),r(2),O(u)}}function Y(s,g){s&1&&(t(0,"span"),d(1,"Creating..."),n())}function G(s,g){s&1&&(t(0,"span"),d(1,"Create Campaign"),n())}function J(s,g){if(s&1&&(t(0,"div",34),d(1),n()),s&2){let u=v();r(),A(" ",u.errorMessage," ")}}var te=(()=>{let g=class g{constructor(o,a){this.campaignService=o,this.router=a,this.campaignRequest={name:"",description:"",startDate:new Date,endDate:new Date,targetAnimals:[],vaccineType:""},this.startDateString="",this.endDateString="",this.loading=!1,this.errorMessage="",this.availableAnimals=["cattle","bovine","livestock","sheep","goats","pigs","horses"]}onAnimalSelectionChange(o){let a=o.target.value,e=o.target.checked;if(this.campaignRequest.targetAnimals||(this.campaignRequest.targetAnimals=[]),e)this.campaignRequest.targetAnimals.includes(a)||this.campaignRequest.targetAnimals.push(a);else{let l=this.campaignRequest.targetAnimals.indexOf(a);l>-1&&this.campaignRequest.targetAnimals.splice(l,1)}}isAnimalSelected(o){return this.campaignRequest.targetAnimals?.includes(o)||!1}isFormValid(){return this.startDateString!==""&&this.endDateString!==""}onSubmit(){if(this.loading)return;if(!this.startDateString||!this.endDateString){this.errorMessage="Please select both start and end dates.";return}let o=new Date(this.startDateString),a=new Date(this.endDateString);if(a<=o){this.errorMessage="End date must be after start date.";return}this.campaignRequest.startDate=o,this.campaignRequest.endDate=a,this.loading=!0,this.errorMessage="",this.campaignService.createCampaign(this.campaignRequest).subscribe({next:e=>{this.loading=!1,this.router.navigate(["/campaigns",e.id])},error:e=>{this.loading=!1,this.errorMessage=e.message||"Failed to create campaign. Please try again.",console.error("Error creating campaign:",e)}})}goBack(){this.router.navigate(["/campaigns"])}};g.\u0275fac=function(a){return new(a||g)(M(j),M(T))},g.\u0275cmp=k({type:g,selectors:[["app-add-campaign"]],decls:46,vars:12,consts:[["campaignForm","ngForm"],[1,"add-campaign-container"],[1,"add-campaign-content","fade-in"],[1,"add-header"],[1,"back-button",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"],[1,"add-title"],[1,"add-form-card"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","e.g., Bovine Brucellosis Campaign","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Describe the campaign objectives and procedures","rows","4","required","",1,"form-input","textarea",3,"ngModelChange","ngModel"],[1,"form-row"],["for","startDate"],["type","date","id","startDate","name","startDate","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate","name","endDate","required","",1,"form-input",3,"ngModelChange","ngModel","min"],["for","vaccineType"],["type","text","id","vaccineType","name","vaccineType","placeholder","e.g., Brucellosis Vaccine, FMD Vaccine",1,"form-input",3,"ngModelChange","ngModel"],["for","targetAnimals"],[1,"checkbox-group"],["class","checkbox-item",4,"ngFor","ngForOf"],[1,"form-hint"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","error-message",4,"ngIf"],[1,"checkbox-item"],["type","checkbox",3,"change","value","checked"],[1,"checkbox-label"],[1,"error-message"]],template:function(a,e){if(a&1){let l=y();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),_("click",function(){return p(l),c(e.goBack())}),w(),t(4,"svg",5),P(5,"path",6),n()(),S(),t(6,"h1",7),d(7,"Create New Campaign"),n()(),t(8,"div",8)(9,"form",9,0),_("ngSubmit",function(){return p(l),c(e.onSubmit())}),t(11,"div",10)(12,"label",11),d(13,"Campaign Name *"),n(),t(14,"input",12),C("ngModelChange",function(i){return p(l),b(e.campaignRequest.name,i)||(e.campaignRequest.name=i),c(i)}),n()(),t(15,"div",10)(16,"label",13),d(17,"Description *"),n(),t(18,"textarea",14),C("ngModelChange",function(i){return p(l),b(e.campaignRequest.description,i)||(e.campaignRequest.description=i),c(i)}),n()(),t(19,"div",15)(20,"div",10)(21,"label",16),d(22,"Start Date *"),n(),t(23,"input",17),C("ngModelChange",function(i){return p(l),b(e.startDateString,i)||(e.startDateString=i),c(i)}),n()(),t(24,"div",10)(25,"label",18),d(26,"End Date *"),n(),t(27,"input",19),C("ngModelChange",function(i){return p(l),b(e.endDateString,i)||(e.endDateString=i),c(i)}),n()()(),t(28,"div",10)(29,"label",20),d(30,"Vaccine/Treatment Type"),n(),t(31,"input",21),C("ngModelChange",function(i){return p(l),b(e.campaignRequest.vaccineType,i)||(e.campaignRequest.vaccineType=i),c(i)}),n()(),t(32,"div",10)(33,"label",22),d(34,"Target Animals"),n(),t(35,"div",23),x(36,H,4,3,"label",24),n(),t(37,"small",25),d(38,"Select the types of animals this campaign targets"),n()(),t(39,"div",26)(40,"button",27),_("click",function(){return p(l),c(e.goBack())}),d(41," Cancel "),n(),t(42,"button",28),x(43,Y,2,0,"span",29)(44,G,2,0,"span",29),n()()(),x(45,J,2,1,"div",30),n()()()}if(a&2){let l=D(10);r(14),f("ngModel",e.campaignRequest.name),r(4),f("ngModel",e.campaignRequest.description),r(5),f("ngModel",e.startDateString),r(4),f("ngModel",e.endDateString),m("min",e.startDateString),r(4),f("ngModel",e.campaignRequest.vaccineType),r(5),m("ngForOf",e.availableAnimals),r(4),m("disabled",e.loading),r(2),m("disabled",e.loading||l.invalid||!e.isFormValid()),r(),m("ngIf",e.loading),r(),m("ngIf",!e.loading),r(),m("ngIf",e.errorMessage)}},dependencies:[q,V,E,L,I,R,W,F,N,z,B],styles:[".add-campaign-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--light-gray);padding:20px}.add-campaign-content[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}.add-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px;padding-top:20px}.back-button[_ngcontent-%COMP%]{background:var(--white);border:none;border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:20px;transition:var(--transition);color:var(--dark-green);box-shadow:0 2px 8px #0000001a}.back-button[_ngcontent-%COMP%]:hover{transform:translate(-2px);box-shadow:0 4px 12px #00000026}.add-title[_ngcontent-%COMP%]{color:var(--dark-green);font-size:28px;font-weight:700;margin:0}.add-form-card[_ngcontent-%COMP%]{background:var(--white);border-radius:20px;padding:40px;box-shadow:0 10px 30px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:var(--text-dark);margin-bottom:8px}.form-input[_ngcontent-%COMP%]{width:100%;padding:16px 20px;border:2px solid #e0e0e0;border-radius:var(--border-radius);background-color:var(--white);font-size:16px;color:var(--text-dark);transition:var(--transition)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--dark-green);transform:translateY(-1px)}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit}.checkbox-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:10px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:8px;border-radius:8px;transition:var(--transition)}.checkbox-item[_ngcontent-%COMP%]:hover{background:var(--light-beige)}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;width:18px;height:18px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-dark);text-transform:capitalize}.form-hint[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:5px;display:block}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:40px;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:16px 32px;font-size:16px;font-weight:600;min-width:140px;border:none;border-radius:var(--border-radius);cursor:pointer;transition:var(--transition)}.btn-primary[_ngcontent-%COMP%]{background:var(--dark-green);color:var(--white)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#024a1c;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background:var(--light-beige);color:var(--dark-green)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0d99b;transform:translateY(-2px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-message[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:16px;border-radius:var(--border-radius);margin-top:20px;text-align:center;font-size:14px}@media (max-width: 600px){.add-campaign-container[_ngcontent-%COMP%]{padding:15px}.add-form-card[_ngcontent-%COMP%]{padding:25px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}.checkbox-group[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]});let s=g;return s})();export{te as AddCampaignComponent};
